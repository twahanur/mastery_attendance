{
	"info": {
		"_postman_id": "8f2e4a1b-6c3d-4e5f-9876-543210abcdef",
		"name": "Attendance Tracker - Complete Admin Settings API (Fixed)",
		"description": "Complete API collection for Phases 1-4: Foundation Settings, Company Settings, Email Settings, and User Management Settings",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Admin Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set('adminToken', jsonData.token);",
									"        console.log('Admin token saved successfully');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Employee Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set('employeeToken', jsonData.token);",
									"        console.log('Employee token saved successfully');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{employeeEmail}}\",\n  \"password\": \"{{employeePassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					}
				}
			]
		},
		{
			"name": "üìä Phase 1 - Foundation Settings",
			"item": [
				{
					"name": "Get All Settings",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings"
							]
						}
					}
				},
				{
					"name": "Get Settings by Category",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/category/company",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"category",
								"company"
							]
						}
					}
				},
				{
					"name": "Create Setting",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"key\": \"company.name\",\n  \"value\": \"{{companyName}}\",\n  \"category\": \"company\",\n  \"description\": \"Company name for branding\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings"
							]
						}
					}
				},
				{
					"name": "Update Setting",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"value\": \"Updated Company Name\",\n  \"description\": \"Updated company name\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/company.name",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company.name"
							]
						}
					}
				},
				{
					"name": "Bulk Update Settings",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"settings\": [\n    {\n      \"key\": \"company.name\",\n      \"value\": \"{{companyName}}\",\n      \"category\": \"company\"\n    },\n    {\n      \"key\": \"company.address\",\n      \"value\": \"123 Main St, City\",\n      \"category\": \"company\"\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/bulk",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"bulk"
							]
						}
					}
				}
			]
		},
		{
			"name": "üè¢ Phase 2 - Company Settings",
			"item": [
				{
					"name": "Get Company Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/company/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"profile"
							]
						}
					}
				},
				{
					"name": "Update Company Profile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{companyName}}\",\n  \"address\": \"123 Main Street, City, State 12345\",\n  \"phone\": \"+1-555-123-4567\",\n  \"email\": \"info@company.com\",\n  \"website\": \"https://www.company.com\",\n  \"industry\": \"Technology\",\n  \"description\": \"Leading technology company\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/company/profile",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"profile"
							]
						}
					}
				},
				{
					"name": "Get Working Hours",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/company/working-hours",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"working-hours"
							]
						}
					}
				},
				{
					"name": "Update Working Hours",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"monday\": { \"start\": \"09:00\", \"end\": \"17:00\", \"isWorkingDay\": true },\n  \"tuesday\": { \"start\": \"09:00\", \"end\": \"17:00\", \"isWorkingDay\": true },\n  \"wednesday\": { \"start\": \"09:00\", \"end\": \"17:00\", \"isWorkingDay\": true },\n  \"thursday\": { \"start\": \"09:00\", \"end\": \"17:00\", \"isWorkingDay\": true },\n  \"friday\": { \"start\": \"09:00\", \"end\": \"17:00\", \"isWorkingDay\": true },\n  \"saturday\": { \"start\": \"09:00\", \"end\": \"13:00\", \"isWorkingDay\": false },\n  \"sunday\": { \"start\": \"00:00\", \"end\": \"00:00\", \"isWorkingDay\": false },\n  \"timezone\": \"Asia/Dhaka\",\n  \"lunchBreakStart\": \"12:00\",\n  \"lunchBreakEnd\": \"13:00\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/company/working-hours",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"working-hours"
							]
						}
					}
				},
				{
					"name": "Get Holidays",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/company/holidays",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"holidays"
							]
						}
					}
				},
				{
					"name": "Add Holiday",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"New Year\",\n  \"date\": \"2025-01-01\",\n  \"type\": \"public\",\n  \"description\": \"New Year celebration\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/company/holidays",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"holidays"
							]
						}
					}
				},
				{
					"name": "Check Working Day",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/company/working-day/{{testDate}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"company",
								"working-day",
								"{{testDate}}"
							]
						}
					}
				}
			]
		},
		{
			"name": "üìß Phase 3 - Email Settings",
			"item": [
				{
					"name": "Get SMTP Configuration",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/email/smtp",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"email",
								"smtp"
							]
						}
					}
				},
				{
					"name": "Update SMTP Configuration",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"host\": \"smtp.gmail.com\",\n  \"port\": 587,\n  \"secure\": false,\n  \"user\": \"your-email@company.com\",\n  \"pass\": \"your-app-password\",\n  \"from\": \"Attendance System <noreply@company.com>\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/email/smtp",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"email",
								"smtp"
							]
						}
					}
				},
				{
					"name": "Test SMTP Connection",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/email/smtp/test",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"email",
								"smtp",
								"test"
							]
						}
					}
				},
				{
					"name": "Get Email Templates",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/email/templates",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"email",
								"templates"
							]
						}
					}
				},
				{
					"name": "Update Email Template",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subject\": \"üïê Attendance Reminder - Please Mark Your Attendance\",\n  \"html\": \"<div style='font-family: Arial, sans-serif;'><h2>Attendance Reminder</h2><p>Dear {{employeeName}},</p><p>Please mark your attendance for {{date}}.</p></div>\",\n  \"text\": \"Dear {{employeeName}}, Please mark your attendance for {{date}}.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/settings/email/templates/attendanceReminder",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"email",
								"templates",
								"attendanceReminder"
							]
						}
					}
				},
				{
					"name": "Get Notification Schedule",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/settings/email/schedule",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"settings",
								"email",
								"schedule"
							]
						}
					}
				}
			]
		},
		{
			"name": "üë• Phase 4 - User Management",
			"item": [
				{
					"name": "Password Policy",
					"item": [
						{
							"name": "Get Password Policy",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/password-policy",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"password-policy"
									]
								}
							}
						},
						{
							"name": "Update Password Policy",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"minLength\": 8,\n  \"maxLength\": 128,\n  \"requireUppercase\": true,\n  \"requireLowercase\": true,\n  \"requireNumbers\": true,\n  \"requireSymbols\": true,\n  \"preventCommonPasswords\": true,\n  \"preventUserInfo\": true,\n  \"expirationDays\": 90,\n  \"historyCount\": 5\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/password-policy",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"password-policy"
									]
								}
							}
						},
						{
							"name": "Validate Password",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"password\": \"StrongPass123!\",\n  \"userInfo\": {\n    \"email\": \"test@company.com\",\n    \"name\": \"John Doe\"\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/password-policy/validate",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"password-policy",
										"validate"
									]
								}
							}
						}
					]
				},
				{
					"name": "Registration Policy",
					"item": [
						{
							"name": "Get Registration Policy",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/registration-policy",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"registration-policy"
									]
								}
							}
						},
						{
							"name": "Update Registration Policy",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"allowSelfRegistration\": false,\n  \"requireEmailVerification\": true,\n  \"requireAdminApproval\": true,\n  \"allowedEmailDomains\": [\"company.com\"],\n  \"blockedEmailDomains\": [\"tempmail.com\"],\n  \"defaultRole\": \"EMPLOYEE\",\n  \"autoActivateAccounts\": false,\n  \"requireInvitation\": true\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/registration-policy",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"registration-policy"
									]
								}
							}
						}
					]
				},
				{
					"name": "Account Lockout",
					"item": [
						{
							"name": "Get Lockout Rules",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/lockout-rules",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"lockout-rules"
									]
								}
							}
						},
						{
							"name": "Update Lockout Rules",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"enabled\": true,\n  \"maxFailedAttempts\": 5,\n  \"lockoutDurationMinutes\": 30,\n  \"resetFailedAttemptsAfterMinutes\": 60,\n  \"notifyAdminOnLockout\": true,\n  \"allowSelfUnlock\": false,\n  \"progressiveDelay\": true\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/lockout-rules",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"lockout-rules"
									]
								}
							}
						}
					]
				},
				{
					"name": "Profile Fields",
					"item": [
						{
							"name": "Get Profile Fields",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/profile-fields",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"profile-fields"
									]
								}
							}
						},
						{
							"name": "Update Profile Fields",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n  {\n    \"fieldName\": \"firstName\",\n    \"required\": true,\n    \"visible\": true,\n    \"editable\": true,\n    \"fieldType\": \"text\",\n    \"validation\": {\n      \"minLength\": 1,\n      \"maxLength\": 50\n    }\n  },\n  {\n    \"fieldName\": \"department\",\n    \"required\": false,\n    \"visible\": true,\n    \"editable\": true,\n    \"fieldType\": \"select\",\n    \"validation\": {\n      \"options\": [\"HR\", \"IT\", \"Finance\", \"Operations\"]\n    }\n  }\n]"
								},
								"url": {
									"raw": "{{baseUrl}}/admin/user-settings/profile-fields",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"admin",
										"user-settings",
										"profile-fields"
									]
								}
							}
						}
					]
				}
			]
		},
		{
			"name": "üè• Health & System",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"health"
							]
						}
					}
				},
				{
					"name": "Email System Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/admin/email-status",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"admin",
								"email-status"
							]
						}
					}
				},
				{
					"name": "Send Test Email",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"subject\": \"Test Email\",\n  \"message\": \"This is a test email from the attendance system.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/admin/test-email",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"admin",
								"test-email"
							]
						}
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-set baseUrl if not defined",
					"if (!pm.environment.get('baseUrl')) {",
					"    pm.environment.set('baseUrl', 'http://localhost:5000/api/v1');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test scripts",
					"pm.test('Response time is reasonable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"if (pm.response.code >= 200 && pm.response.code < 300) {",
					"    pm.test('Status code is successful', function () {",
					"        pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
					"    });",
					"}",
					"",
					"if (pm.response.headers.get('Content-Type') && pm.response.headers.get('Content-Type').includes('application/json')) {",
					"    try {",
					"        const jsonData = pm.response.json();",
					"        pm.test('Response is valid JSON', function () {",
					"            pm.expect(jsonData).to.be.an('object');",
					"        });",
					"    } catch (e) {",
					"        pm.test('Response JSON parse failed', function () {",
					"            pm.expect.fail('Response is not valid JSON');",
					"        });",
					"    }",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5000/api/v1",
			"type": "string"
		}
	]
}